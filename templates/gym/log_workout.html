{% extends "base.html" %}
{% block title %}Entrenar{% endblock %}
{% block content %}
<div class="header-section">
    <h1>Registrar Entrenamiento</h1>
</div>

<form method="POST" id="workoutForm" enctype="multipart/form-data">
    <input type="hidden" name="workout_data" id="workoutData">

    <div class="bento-grid">
        <div class="bento-card" style="grid-column: 1 / -1; padding: 20px; min-height: 600px;">
            
            <div style="display: flex; gap: 15px; flex-direction: column; margin-bottom: 20px; border-bottom: 1px solid #eee; padding-bottom: 20px;">
                <div style="display: flex; gap: 10px; flex-wrap: wrap;">
                    <select id="routineLoader" style="flex: 1; padding: 10px; border-radius: 8px; border: 1px solid #ddd; background: #F9FAFB; min-width: 200px;">
                        <option value="">-- Cargar Rutina --</option>
                        {% for r in routines %}
                            <option value="{{ r.id }}" {% if request.args.get('routine_id')|int == r.id %}selected{% endif %}>{{ r.name }}</option>
                        {% endfor %}
                    </select>
                    <button type="button" onclick="loadRoutine()" class="action-key dark" style="width: auto; padding: 0 15px; font-size: 0.9rem;">Ir</button>
                </div>
                <div style="margin-top: 10px;">
    <label style="font-size: 0.8rem; font-weight: 700; color: var(--text-muted); display: block; margin-bottom: 5px;">Fecha del Entreno</label>
    <input type="datetime-local" name="workout_date" class="form-control" 
           value="{{ now.strftime('%Y-%m-%dT%H:%M') }}" 
           style="width: 100%; padding: 10px;">
</div>
                
                <input type="text" name="note" class="form-control" placeholder="Notas del entreno..." style="width: 100%; padding: 10px;">
                
<div class="file-upload-wrapper">
    <div class="file-upload-btn">
        <i class="fas fa-camera"></i>
        <span>Adjuntar foto del entrenamiento (opcional)</span>
    </div>
    <input type="file" name="photo" accept="image/*" onchange="this.previousElementSibling.querySelector('span').innerText = this.files[0].name">
</div>
            </div>

            <div style="background: #F8FAFC; padding: 15px; border-radius: 12px; border: 1px solid #E2E8F0; margin-bottom: 25px;">
                <label style="font-size: 0.8rem; font-weight: 700; color: var(--text-muted); margin-bottom: 8px; display: block;">AÑADIR EJERCICIO</label>
                <div style="display: flex; gap: 8px; flex-wrap: wrap;">
                    <div style="flex: 100%; width: 100%;">
                        <select id="exerciseSelect" onchange="toggleInputs()" style="width: 100%; padding: 10px; border-radius: 8px; border: 1px solid #CBD5E1;">
                            {% for ex in exercises %}
                                <option value="{{ ex.id }}" 
                                        data-type="{{ 'Cardio' if ex.muscle_group == 'Cardio' else 'Strength' }}"
                                        data-desc="{{ ex.description or '' }}"
                                        data-video="{{ ex.video_link or '' }}">
                                    {{ ex.name }}
                                </option>
                            {% endfor %}
                        </select>
                    </div>

                    <div style="display: flex; gap: 5px; flex: 1; margin-top: 5px; max-width: 350px;">
    <input type="number" id="seriesInput" placeholder="S" value="3" class="input-compact" style="flex: 0.6; background: #E2E8F0;">
    <div id="inputsStrength" style="display: flex; gap: 5px; flex: 2;">
        <input type="number" id="weightInput" placeholder="Kg" step="0.5" class="input-compact">
        <input type="number" id="repsInput" placeholder="Rps" class="input-compact">
                        </div>
                        <div id="inputsCardio" style="display: flex; gap: 5px; flex: 2;">
                            <input type="number" id="distInput" placeholder="km" step="0.1" class="input-compact">
                            <input type="number" id="timeInput" placeholder="min" class="input-compact">
                        </div>
                    </div>
                    
                    <button type="button" onclick="addSet()" class="action-key" style="width: 42px; min-width: 42px; display: flex; align-items: center; justify-content: center; padding: 0; margin-top: 5px;">
                        <i class="fas fa-plus"></i>
                    </button>
                </div>
            </div>

            <div id="setsList" style="display: flex; flex-direction: column; gap: 12px;"></div>

            <div id="emptyMsg" style="padding: 30px; text-align: center; color: var(--text-muted); font-style: italic; background: #F9FAFB; border-radius: 12px; border: 1px dashed #ddd; margin-top: 10px; display: none;">
                Selecciona una rutina arriba o añade ejercicios manualmente.
            </div>

            <div style="margin-top: 30px;">
                <button type="submit" class="action-key" style="background: #059669; color: white; width: 100%; padding: 15px; font-size: 1.1rem; justify-content: center;">
                    <i class="fas fa-check-circle"></i> Terminar Entrenamiento
                </button>
            </div>
        </div>
    </div>
</form>

<div id="descModal" class="modal-overlay">
    <div class="modal-content">
        <div style="display: flex; justify-content: space-between; align-items: start; margin-bottom: 20px;">
            <div>
                <h3 id="descModalTitle" style="margin: 0; color: #1E293B; font-size: 1.5rem; font-weight: 800; letter-spacing: -0.02em;">Título</h3>
                <span style="font-size: 0.85rem; color: #64748B; font-weight: 500;">Detalles técnicos y ejecución</span>
            </div>
            <button type="button" onclick="closeDescModal()" style="background: #F1F5F9; border: none; width: 32px; height: 32px; border-radius: 50%; font-size: 1.2rem; cursor: pointer; color: #64748B; display: flex; align-items: center; justify-content: center; transition: all 0.2s;">
                &times;
            </button>
        </div>
        
        <div style="background: #F8FAFC; padding: 25px; border-radius: 16px; border: 1px solid #E2E8F0;">
            <p id="descModalText" style="margin: 0; font-size: 1.05rem; color: #334155; white-space: pre-wrap; line-height: 1.7; font-family: 'Inter', sans-serif;"></p>
        </div>
        
        <div style="margin-top: 25px; display: flex; justify-content: flex-end;">
            <button onclick="closeDescModal()" style="background: #1E293B; color: white; border: none; padding: 10px 24px; border-radius: 12px; font-weight: 600; cursor: pointer; transition: transform 0.1s;">
                Entendido
            </button>
        </div>
    </div>
</div>

{% include "gym/log_workout_scripts.html" ignore missing %}
<script>
    let sets = {{ preloaded_json|safe if preloaded_json else '[]' }};
    let activeIntervals = {};
    let currentTimerIndex = null;
    
    // --- LÓGICA DE CARGA ---

    function loadRoutine() {
        const id = document.getElementById('routineLoader').value;
        if(id) window.location.href = `/gym/log?routine_id=${id}`;
    }

    function toggleInputs() {
        const select = document.getElementById('exerciseSelect');
        const selectedOption = select.options[select.selectedIndex];
        const type = selectedOption.getAttribute('data-type');
        
        document.getElementById('inputsStrength').style.display = (type === 'Cardio') ? 'none' : 'flex';
        document.getElementById('inputsCardio').style.display = (type === 'Cardio') ? 'flex' : 'none';
    }

    // --- AÑADIR SET Y CAPTURAR DATOS ---
    function addSet() {
        const select = document.getElementById('exerciseSelect');
        const selectedOption = select.options[select.selectedIndex];
        const type = selectedOption.getAttribute('data-type');
        
        // CAPTURAR INFO (Descripción y Video)
        const desc = selectedOption.getAttribute('data-desc');
        const video = selectedOption.getAttribute('data-video');

        let newItem = { 
            id: select.value, 
            name: selectedOption.text, 
            type: type, 
            series: document.getElementById('seriesInput').value || 3, 
            weight:'', reps:'', distance:'', time:'', rest:90,
            
            // Guardamos la info en el objeto
            description: desc || '',
            videoLink: video || ''
        };

        if (type === 'Cardio') { 
            newItem.distance = document.getElementById('distInput').value; 
            newItem.time = document.getElementById('timeInput').value; 
        } else { 
            newItem.weight = document.getElementById('weightInput').value; 
            newItem.reps = document.getElementById('repsInput').value; 
        }
        
        sets.push(newItem); 
        renderList();
    }

    // --- RENDERIZAR LISTA (Aquí está la lógica de los iconos) ---
function renderList() {
    const container = document.getElementById('setsList');
    const inputData = document.getElementById('workoutData');
    const emptyMsg = document.getElementById('emptyMsg');
    container.innerHTML = '';

    if (sets.length === 0) {
        emptyMsg.style.display = 'block';
        inputData.value = '[]';
        return;
    } else {
        emptyMsg.style.display = 'none';
    }

    sets.forEach((set, index) => {
        const card = document.createElement('div');
        card.className = 'set-card';
        
        let hasData = (set.type === 'Cardio') ? (set.distance || set.time) : (set.weight && set.reps);
        if(hasData) { 
            card.style.borderLeftColor = "#059669"; 
            card.style.background = "#F0FDF4"; 
        }

        // 1. Info e Iconos (Izquierda)
        let iconsHtml = '';
        if (set.videoLink) {
            iconsHtml += `<a href="${set.videoLink}" target="_blank" class="icon-btn" style="color: #EF4444; font-size: 1.1rem;"><i class="fab fa-youtube"></i></a>`;
        }
        if (set.description) {
            iconsHtml += `<button type="button" onclick="showDescription(${index})" class="icon-btn" style="background:none; border:none; color: #3B82F6; cursor:pointer; font-size: 1rem;"><i class="fas fa-info-circle"></i></button>`;
        }

        // 2. Inputs (Centro - Ahora forzado al medio)
        let inputsHtml = '';
        const seriesInput = `
            <div class="input-wrapper">
                <input type="number" value="${set.series}" onchange="updateSet(${index}, 'series', this.value)" class="input-compact input-sets">
                <span class="floating-label">Sets</span>
            </div>`;

        if (set.type === 'Cardio') {
            inputsHtml = `
                ${seriesInput}
                <div class="input-wrapper">
                    <input type="number" value="${set.distance}" step="0.1" onchange="updateSet(${index}, 'distance', this.value)" class="input-compact">
                    <span class="floating-label">Km</span>
                </div>
                <div class="input-wrapper">
                    <input type="number" value="${set.time}" onchange="updateSet(${index}, 'time', this.value)" class="input-compact">
                    <span class="floating-label">Min</span>
                </div>`;
        } else {
            inputsHtml = `
                ${seriesInput}
                <div class="input-wrapper">
                    <input type="number" value="${set.weight}" step="0.5" onchange="updateSet(${index}, 'weight', this.value)" class="input-compact">
                    <span class="floating-label">Kg</span>
                </div>
                <div class="input-wrapper">
                    <input type="number" value="${set.reps}" onchange="updateSet(${index}, 'reps', this.value)" class="input-compact">
                    <span class="floating-label">Reps</span>
                </div>`;
        }

        // 3. Timer (Derecha)
        let restBtnHtml = '';
        if (set.rest) {
            const now = Date.now();
            const isRunning = set.timerEnd && set.timerEnd > now;
            const timeLeft = isRunning ? Math.ceil((set.timerEnd - now) / 1000) : set.rest;
            const btnStyle = isRunning ? "background: #FFF7ED; border: 1px solid #F97316; color: #C2410C;" : "background: #ECFDF5; border: 1px solid #10B981; color: #047857;";
            const icon = isRunning ? 'fa-hourglass-half fa-spin' : 'fa-stopwatch';
            const action = isRunning ? `openTimerModal(${index})` : `startTimer(${index}, ${set.rest})`;

            restBtnHtml = `
                <div onclick="${action}" id="timer-badge-${index}" class="timer-badge" style="${btnStyle}">
                    <i class="fas ${icon}"></i>
                    <span>${formatTime(timeLeft)}</span>
                </div>`;
            if (isRunning) ensureTimerRunning(index);
        }

        card.innerHTML = `
            <div style="display: flex; align-items: center; width: 100%; gap: 10px; position: relative;">
                <div style="width: 25%; min-width: 120px;">
                    <div style="font-weight: 700; font-size: 0.95rem; color: #1E293B; margin-bottom: 2px;">${set.name}</div>
                    <div style="display: flex; gap: 6px;">${iconsHtml}</div>
                </div>

                <div style="flex-grow: 1; display: flex; justify-content: center;">
                    <div class="set-inputs" style="display: flex; gap: 8px; justify-content: center; align-items: flex-start;">
                        ${inputsHtml}
                    </div>
                </div>

                <div style="width: 25%; display: flex; flex-direction: column; align-items: flex-end; gap: 5px;">
                    ${restBtnHtml}
                    <button type="button" onclick="removeSet(${index})" style="background:none; border:none; color:#CBD5E1; cursor:pointer; font-size: 0.9rem;">
                        <i class="fas fa-times-circle"></i>
                    </button>
                </div>
            </div>`;
        
        container.appendChild(card);
    });
    
    inputData.value = JSON.stringify(sets);
}
    
    function updateSet(i, f, v) { sets[i][f] = v; }
    function removeSet(i) { sets.splice(i, 1); renderList(); }
    
    // --- FUNCIONES MODAL TEXTO (DESCRIPCIÓN) ---
    function showDescription(index) {
        const set = sets[index];
        document.getElementById('descModalTitle').innerText = set.name;
        document.getElementById('descModalText').innerText = set.description || "Sin notas disponibles.";
        document.getElementById('descModal').style.display = 'flex'; // Flex para centrar
    }

    function closeDescModal() {
        document.getElementById('descModal').style.display = 'none';
    }

    // --- FUNCIONES TIMER (Standard) ---
    let lastBeepSecond = -1;

function startTimer(i, s) {
    sets[i].timerEnd = Date.now() + (s * 1000);
    openTimerModal(i); // Abrir modal automáticamente al empezar
    renderList();
}
    function openTimerModal(i) { 
        currentTimerIndex = i; 
        if(document.getElementById('timerModal')) {
            document.getElementById('timerModal').style.display = 'flex'; 
            if(document.getElementById('modalExerciseName')) document.getElementById('modalExerciseName').innerText = sets[i].name; 
            updateModalDisplay(); 
        }
    }
    function updateModalDisplay() { 
        if(currentTimerIndex===null || !document.getElementById('modalTimerDisplay')) return; 
        const rem = Math.max(0, Math.ceil((sets[currentTimerIndex].timerEnd - Date.now())/1000)); 
        document.getElementById('modalTimerDisplay').innerText = formatTime(rem); 
    }
    function openTimerModal(i) {
    currentTimerIndex = i;
    const modal = document.getElementById('timerModal');
    modal.style.display = 'flex';
    document.getElementById('modalExerciseName').innerText = sets[i].name;
    updateModalDisplay();
}

function closeTimerModal() {
    document.getElementById('timerModal').style.display = 'none';
    currentTimerIndex = null;
}

function skipTimer() {
    if (currentTimerIndex !== null) {
        sets[currentTimerIndex].timerEnd = Date.now(); // Finalizar tiempo
        closeTimerModal();
    }
}

function ensureTimerRunning(i) {
    if (activeIntervals[i]) return;
    
    activeIntervals[i] = setInterval(() => {
        const end = sets[i].timerEnd;
        const now = Date.now();
        const remaining = Math.max(0, Math.ceil((end - now) / 1000));

        // --- LÓGICA DE SONIDO (Últimos 3 segundos) ---
        if (remaining <= 3 && remaining > 0 && remaining !== lastBeepSecond) {
            const beep = document.getElementById('beepSound');
            beep.currentTime = 0; // Reiniciar audio
            beep.play().catch(e => console.log("Audio bloqueado por el navegador"));
            lastBeepSecond = remaining;
        }

        if (!end || now >= end) {
            clearInterval(activeIntervals[i]);
            delete activeIntervals[i];
            if (currentTimerIndex === i) closeTimerModal();
            renderList();
            return;
        }

        // Actualizar el badge de la lista
        const badge = document.getElementById(`timer-badge-${i}`);
        if (badge) badge.querySelector('span').innerText = formatTime(remaining);
        
        // Actualizar el modal si es el timer activo
        if (currentTimerIndex === i) {
            updateModalDisplay();
        }
    }, 1000);
}

function updateModalDisplay() {
    if (currentTimerIndex === null) return;
    const remaining = Math.max(0, Math.ceil((sets[currentTimerIndex].timerEnd - Date.now()) / 1000));
    document.getElementById('modalTimerDisplay').innerText = formatTime(remaining);
    
    // Cambiar color del texto si quedan menos de 5 seg
    const display = document.getElementById('modalTimerDisplay');
    display.style.color = (remaining <= 5) ? '#ef4444' : 'var(--primary)';
}
    function formatTime(s) { let m = Math.floor(s/60); let sec = s%60; return `${m}:${sec<10?'0'+sec:sec}`; }

    toggleInputs();
    renderList();
</script>
<style>
    :root {
        --primary: #10B981;       /* Verde solo para acciones principales */
        --primary-dark: #059669;
        --text-main: #334155;     /* Gris oscuro elegante */
        --text-muted: #94A3B8;    /* Gris suave */
        --bg-body: #F1F5F9;       /* Fondo general muy claro */
        --card-bg: #FFFFFF;
        --border-color: #E2E8F0;
        --radius: 12px;
    }

    body {
        background-color: var(--bg-body);
        font-family: 'Inter', -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
        color: var(--text-main);
    }

    /* TÍTULOS */
    .header-section h1 {
        font-weight: 700;
        color: #1E293B;
        margin-bottom: 20px;
        font-size: 1.5rem;
    }

    /* TARJETA PRINCIPAL (Bento) */
    .bento-card {
        background: var(--card-bg);
        border-radius: 16px;
        padding: 25px !important;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.05), 0 2px 4px -1px rgba(0, 0, 0, 0.03);
    }

    /* INPUTS GENERALES (Notas, Selects) */
    select, input[type="text"], .form-control {
        background-color: #F8FAFC;
        border: 1px solid var(--border-color);
        border-radius: var(--radius);
        padding: 10px 15px;
        font-size: 0.95rem;
        color: var(--text-main);
        width: 100%;
        transition: all 0.2s;
    }

    select:focus, input:focus, .form-control:focus {
        background: #fff;
        border-color: var(--primary);
        outline: none;
        box-shadow: 0 0 0 3px rgba(16, 185, 129, 0.1);
    }

    /* --- NUEVO ESTILO: ADJUNTAR FOTO (Minimalista) --- */
    .file-upload-wrapper {
        position: relative;
        overflow: hidden;
        display: inline-block;
        width: 100%;
    }
    
    .file-upload-btn {
        border: 1px solid var(--border-color);
        color: var(--text-main);
        background-color: white;
        padding: 10px 15px;
        border-radius: var(--radius);
        font-size: 0.9rem;
        font-weight: 500;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: 10px;
        transition: all 0.2s;
        width: 100%;
        box-sizing: border-box;
    }

    .file-upload-btn:hover {
        background-color: #F8FAFC;
        border-color: #CBD5E1;
    }

    .file-upload-btn i {
        color: var(--text-muted); /* Icono gris discreto */
    }

    /* El input real está oculto pero funcional */
    .file-upload-wrapper input[type=file] {
        font-size: 100px;
        position: absolute;
        left: 0;
        top: 0;
        opacity: 0;
        cursor: pointer;
        width: 100%;
        height: 100%;
    }

    /* BOTONES DE ACCIÓN */
    .action-key {
        border-radius: var(--radius);
        font-weight: 600;
        border: none;
        cursor: pointer;
        transition: transform 0.1s;
    }
    
    .action-key.dark {
        background: #334155;
        color: white;
    }

    /* Botón Terminar (Verde Sólido pero limpio) */
    button[type="submit"].action-key {
        background: var(--primary);
        color: white;
        font-size: 1.1rem;
        padding: 14px;
        box-shadow: 0 4px 12px rgba(16, 185, 129, 0.3);
    }
    button[type="submit"].action-key:hover {
        background: var(--primary-dark);
        transform: translateY(-1px);
    }

    /* --- TARJETAS DE SETS (Diseño en una línea) --- */
    .set-card {
        background: white;
        border: 1px solid var(--border-color);
        border-left: 4px solid var(--primary) !important;
        border-radius: 12px;
        padding: 12px 15px; /* Menos padding vertical */
        box-shadow: 0 2px 4px rgba(0,0,0,0.02);
        display: flex;
        flex-direction: column;
        gap: 10px;
    }

    .set-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 2px;
    }

    .set-title span {
        font-weight: 600;
        font-size: 1rem;
        color: var(--text-main);
    }

    /* GRID PARA INPUTS EN UNA LÍNEA */
    .set-inputs {
        display: grid;
        grid-template-columns: 80px 1fr 1fr; /* Sets fijo, resto flexible */
        gap: 10px;
        align-items: center;
    }

    /* INPUTS COMPACTOS (Estilo limpio) */
    .input-compact {
        background: #F8FAFC;
        border: 1px solid var(--border-color);
        border-radius: 8px;
        padding: 8px 5px; /* Padding reducido para que sea bajito */
        text-align: center;
        font-weight: 600;
        color: var(--text-main);
        width: 100%;
        font-size: 0.95rem;
    }
    
    .input-compact:focus {
        background: white;
        border-color: var(--primary);
        outline: none;
    }
    
    .input-wrapper { position: relative; }

    /* ICONOS */
    .icon-btn {
        transition: opacity 0.2s;
        opacity: 0.8;
    }
    .icon-btn:hover { opacity: 1; }

    /* MODAL */
    .modal-overlay {
        position: fixed;
        top: 0; left: 0; width: 100vw; height: 100vh;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
        z-index: 2000;
        display: none;
        align-items: center; justify-content: center;
    }
    .modal-content {
        background: white;
        padding: 25px;
        border-radius: 16px;
        width: 90%; max-width: 500px;
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
    }

    @media (max-width: 768px) { 
        .floating-label { display: none; } 
        .set-inputs { gap: 8px; } 
    }

    /* Contenedor de inputs más estrecho y centrado */
.set-inputs {
    display: grid;
    /* Ajustamos el ancho: el primero (Sets) es más pequeño, los otros dos iguales */
    grid-template-columns: 65px 1fr 1fr; 
    gap: 8px;
    align-items: center;
    max-width: 350px; /* Limitamos el ancho total para que no se estire en PC */
}

/* Estilo para las etiquetas flotantes (SETS, KG, REPS) */
.floating-label {
    display: block;
    font-size: 0.65rem;
    font-weight: 800;
    color: var(--text-muted);
    text-transform: uppercase;
    text-align: center;
    margin-top: 4px;
    letter-spacing: 0.5px;
}

/* Inputs más pequeños y con fuente técnica */
.input-compact {
    background: #F1F5F9;
    border: 1px solid #E2E8F0;
    border-radius: 8px;
    padding: 6px 2px; /* Reducimos padding vertical */
    text-align: center;
    font-weight: 700;
    /* Fuente monoespaciada para que los números se vean alineados */
    font-family: 'SF Mono', 'Roboto Mono', Menlo, monospace; 
    color: #1E293B;
    width: 100%;
    font-size: 0.9rem;
    transition: all 0.2s;
}

.input-compact:focus {
    background: white;
    border-color: var(--primary);
    box-shadow: 0 0 0 2px rgba(16, 185, 129, 0.1);
}

/* Ajuste específico para el input de Sets (fondo diferente para distinguir) */
.input-sets {
    background: #E2E8F0;
    color: #475569;
}
.timer-badge {
    background: #ecfdf5; /* Verde muy clarito */
    border: 1px solid #10b981;
    color: #047857;
    padding: 8px 16px; /* Más padding horizontal */
    border-radius: 12px;
    font-size: 0.9rem;
    font-weight: 700;
    display: flex;
    align-items: center;
    gap: 8px;
    cursor: pointer;
    transition: all 0.2s;
    min-width: 100px; /* Ancho mínimo para que no baile el texto */
    justify-content: center;
}

.timer-badge:hover {
    background: #10b981;
    color: white;
}

.timer-badge i {
    font-size: 1.1rem;
}
</style>

<div id="timerModal" class="modal-overlay" style="display: none; flex-direction: column;">
    <div class="modal-content" style="text-align: center; max-width: 400px; padding: 40px;">
        <h2 id="modalExerciseName" style="color: var(--text-muted); font-size: 1rem; text-transform: uppercase; letter-spacing: 1px;">Descanso</h2>
        <div id="modalTimerDisplay" style="font-size: 5rem; font-weight: 800; color: var(--primary); margin: 20px 0; font-variant-numeric: tabular-nums;">
            0:00
        </div>
        <div style="display: flex; gap: 10px; justify-content: center;">
            <button type="button" onclick="closeTimerModal()" class="action-key dark" style="padding: 10px 20px;">Cerrar</button>
            <button type="button" onclick="skipTimer()" class="action-key" style="background: #ef4444; color: white; padding: 10px 20px;">Omitir</button>
        </div>
    </div>
</div>

<audio id="beepSound" preload="auto">
    <source src="https://assets.mixkit.co/active_storage/sfx/2869/2869-preview.mp3" type="audio/mpeg">
</audio>

{% endblock %}